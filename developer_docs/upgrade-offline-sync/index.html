<!doctype html><html><title>Upgrade to Offline Sync App Version</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="E-Heza Documentation"><meta property="og:title" content="Upgrade to Offline Sync App Version"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Open+Sans:wght@400;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://tip-global-health.github.io/eheza-documentation/css/style.3eb621a713dccd892a541fb17f9d3a103c223071d7cdd1c19bb50f4870730a12.css integrity="sha256-PrYhpxPczYkqVB+xf506EDwiMHHXzdHBm7UPSHBzChI=" media=screen><script src=https://code.jquery.com/jquery-2.2.4.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script><body><header><div class=header-left><div class=site-logo><a href=https://tip-global-health.github.io/eheza-documentation//><img src=https://tip-global-health.github.io/eheza-documentation/images/e-heza-logo.png></a></div><div class=site-title>E-Heza Documentation</div></div><div class=header-right><button class=nav-button onclick=sidebarNav()><img src=https://tip-global-health.github.io/eheza-documentation/images/hamburger_icon_white.svg alt></button></div></header><div class=page><section id=sidebar-nav class=sidebar><h2>User Documentation</h2><h3>General</h3><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/login-device/>Login to the App</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/registering-patients-front/>Registering Patients (on the App)</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/reset-environment/>Resetting the Environment</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/troubleshooting-sync/>Troubleshooting the initial sync</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/update-app/>Update the App</a></li></ul><h3>CHW Modules</h3><h4>Integrated Community Case Management</h4><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/acute-illness-module-chw/>Diagnosis, Treatment, and Referral of Childhood Illnesses - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/ai-progress-reports-chw/>AI Progress Reports - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/ai-case-managment-chw/>AI Case Management - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/ai-dashboards-chw/>Community Acute Illness Dashboards</a></li></ul><h4>Antenatal Care</h4><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/antenatal-care-chw/>Pregnancy - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/anc-progress-report-chw/>ANC Progress Report - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/anc-postpartum-chw/>Post-Partum - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/chw-newborn-exam/>Newborn - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/anc-case-management-chw/>ANC Case Management - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/anc-dashboards-chw/>ANC Dashboards - CHW Workflow</a></li></ul><h4>Child Nutrition</h4><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/group-nutrition-chw/>Group Encounters - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/individual-nutrition-chw/>Individual Encounters - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/chw-nutrition/>Diagnosis, Treatment, and Referral of Malnutrition - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/nutrition-case-management-chw/>Nutrition Case Management - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/nutrition-home-visits-chw/>Home Visits - CHW Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/nutrition-dashboards-chw/>Nutrition Dashboards - CHW Workflow</a></li></ul><h3>Health Center Modules</h3><h4>Antenatal Care</h4><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/antenatal-care-module/>Pregnancy - Health Center Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/anc-progress-report-hc/>ANC Progress Report - Health Center Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/laboratory-with-pending-results-management/>Laboratory with Pending Results Management</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/anc-postpartum-hc/>Post-Partum - Health Center Workflow</a></li></ul><h4>Pediatric Care</h4><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/standard-pediatric-visit/>Standard Pediatric Care Visit</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/individual-nutrition-hc/>Individual Nutrition Assessment</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/group-nutrition-hc/>Group Nutrition Assessment</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/acute-illness-module/>Integrated Management of Childhood Illnesses (ICMI) - Health Center Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/pediatric-progress-report-hc/>Comprehensive Pediatric Progress Report</a></li></ul><h4>COVID-19/Acute Illness Management</h4><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/ai-hc/>Acute Illness Assessment - Health Center Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/covid-diagnosis-hc/>COVID-19 Diagnosis, Treatment and Referral - Health Center Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/ai-diagnosis-hc/>Acute Illness Diagnosis, Treatment, Management, and Referral - Health Center Workflow</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/ai-progress-reports-hc/>Acute Illness Progress Reports</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/user_docs/covid-contact-documentation-hc/>COVID-19 Contact Tracing Case Management - Health Center Workflow</a></li></ul><h2>Adminstrator Documentation</h2><h3>General</h3><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/pairing-device/>Creating/Pairing a Device</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/admin-login/>Login to the Admin Site</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/admin-menu/>The Admin Menu</a></li></ul><h3>Creating and Editing Content</h3><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/create-group/>Create Group</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/create-group-encounter/>Create Group Encounter</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/create-nurse/>Create/Edit Nurse</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/delete-a-person-relationship-group/>Delete a person, relationship, group</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/admin_docs/importing-patient-data-in-bulk-backend/>Importing patient data in bulk (backend)</a></li></ul><h2>Developer Documentation</h2><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/developer_docs/technical-specs/>E-Heza Technical Specs</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/developer_docs/quickstart-guide-for-development/>Quickstart Guide for Development</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/developer_docs/upgrade-offline-sync/>Upgrade to Offline Sync App Version</a></li></ul><h2>Community Documentation</h2><ul><li><a href=https://tip-global-health.github.io/eheza-documentation/community_docs/contribute-eheza/>Contributing to E-Heza</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/community_docs/eheza-governance/>E-Heza Governance</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/community_docs/eheza-roadmap/>E-Heza Project Road Map</a></li><li><a href=https://tip-global-health.github.io/eheza-documentation/community_docs/eheza-funding/>Funding Support for E-Heza</a></li></ul><h2>Research and Support Documentation</h2><h3>User testing sessions</h3><ul><li><a href="https://docs.google.com/document/d/1ez4i7tcT0ggw32yMpdSqh7h4ICG6ekOS/edit#heading=h.gjdgxs">ANC _Nurse user testing report</a></li><li><a href=https://docs.google.com/document/d/1UwwORcW-qQGplDqQ2e-ECep6ZCs04GSS/edit>ANC_mother user testing report</a></li><li><a href="https://docs.google.com/presentation/d/1ovzYzbFJRGCoC6WvMZYGg5VskU6k0yQ4/edit#slide=id.p1">AIM_ CHWs User testing report</a></li><li><a href="https://docs.google.com/presentation/d/1ovzYzbFJRGCoC6WvMZYGg5VskU6k0yQ4/edit#slide=id.p1">AIM_CHWs user testing Facilitation guide</a></li><li><a href=https://docs.google.com/document/d/13Dj7hRFw4vZ94vqDiZKO2EoP4OzmAsyrVJNPvxB3PDg/edit>Focus Group Discussion outline</a></li><li><a href=https://docs.google.com/document/d/1yrJ7qpuVwRNtWJ9HkRi3B9TbT8IqkSRt/edit>Focus Group feedback notes</a></li><li><a href=https://docs.google.com/document/d/1dcVFF16NpUbZRfJLdh7y4we6RMVxUJib/edit>Testing report 2018</a></li></ul><h3>Feedback from Training sessions</h3><ul><li><a href=https://docs.google.com/document/d/1rP7gxNGMX_a-NxLk0m66Vv8pC3aNiztlSOUtPeRbCwU/edit>Feedback from Ruli DH on ANC</a></li><li><a href=https://docs.google.com/document/d/1D9RjUdgtpGSBP4Qu6fEFq3YxCyqJaRvXGpm5ijIVYSw/edit>Feedback from Nemba DH on E-Heza</a></li></ul><h3>Internal Reviews by the E-Heza team</h3><ul><li><a href=#>Front end registration</a></li><li><a href=#>Aheza community Health Initiative</a></li><li><a href=#>Case management</a></li><li><a href=#>CHWs Dashboard</a></li><li><a href=#>CHWs nutrition</a></li><li><a href=#>Group/individual encounter</a></li><li><a href=#>FBF module</a></li><li><a href=#>ANC Labs</a></li><li><a href=#>SPV and newborn exam First versio</a></li><li><a href=#>Home visits</a></li><li><a href=#>Nutrition next steps</a></li><li><a href=#>Health center dashboard</a></li><li><a href=#>ANC for CHWs</a></li><li><a href=#>Subsequent visit</a></li></ul></section><div class=docs-content><section class=title><h1 class=title>Upgrade to Offline Sync App Version</section><section class=content><h2 id=download-the-app-and-prepare-your-environment>Download the App and Prepare Your Environment</h2><h3 id=download-the-app>Download the app</h3><p>The first step is to download the new app from site. This is achieved simply by opening the app pinned to your homepage or pointing the chrome browser to the app page at <code>&lt;base domain>/app</code>.</p><p>The newest version should download automatically - indicated by the status icon at the top right corner of the screen. Yellow means a download is in progress, green means the download is complete. You should visit the deployment status page by tapping on the status indicator.</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/deployment-status.jpg></div></div><p>There may be a manual step to activate the new app (like shown above) - in this
case, tap on the &ldquo;Activate New Version&rdquo; button.</p><p>The current version <code>827d9ba6</code> should be showing in the top right corner.</p><h3 id=reset-the-environment>Reset the environment</h3><p>Because this is a major upgrade, we need to be sure that all data from former versions of the application of the device. We will do this by performing a &ldquo;Clear and Reset&rdquo; for the URL that serves the application.</p><p>On an Android device (the directions are slightly different for a desktop, see below):</p><ul><li>In the chrome browser, go to [the app page at <code>&lt;base domain>/app</code> (do this in the Chrome browser even if you have the app pinned to your homepage on the device).</li><li>Click on the Green lock icon just to the left of the address bar in the browser.</li></ul><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/green-lock.jpg></div></div><ul><li>Click on the &ldquo;Site Settings&rdquo; button on the following screen.</li></ul><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/site-settings.jpg></div></div><ul><li>Click on the &ldquo;Clear & Reset&rdquo; button on the following screen.</li></ul><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/clear-reset.jpg></div></div><ul><li>Click on the &ldquo;Clear & Reset&rdquo; again on the confirmation screen.</li></ul><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/reset-confirmation.jpg></div></div><p>After this step, you should pin the app to your home screen by clicking on the menu on the top right and choosing “Add to home screen.”</p><p>Close the Chrome application - you will continue to access the application through the pinned icon on the home screen.</p><h2 id=pairing-a-device>Pairing a Device</h2><p>Our new application works a little differently in that devices are now paired to the backend. This makes it easy for nurses to log in and out and for devices to switch between sessions. It does, however require that an admin do a little setup work on the device to get it ready for use.</p><div class="notification alert">You will need an admin (not nurse) password to the backend to perform this step. All admin users and passwords were kept from the previous app version.</div><p>To pair a device with the backend, you need to create the &ldquo;Device&rdquo; on the backend. In the backend menu, go to Content -> Add Content -> Device, and you&rsquo;ll see something like this:</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/create-device.png></div></div><p>Fill in the name with something that identifies the device (e.g. E-Heza Tablet 1). You can leave the pairing code blank, as it will be auto-generated. Then, you should see something like this &ndash; note the pairing code that was generated.</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/add-device.png></div></div><p>Back on the app on the tablet, you should see this screen:</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/pairing-screen.png></div></div><p>Enter your pairing code.</p><p>If you enter a correct pairing code, then the device will start to download data from the backend. We divide the data into two groups. Some data is downloaded to every device, whereas other data is downloaded based on what&rsquo;s needed for the health center that a device wants to work with. (The purpose is to stay within the limits of what can reasonably be stored on the device).</p><h3 id=troubleshooting-the-initial-sync>Troubleshooting the initial sync</h3><p>You can access the device status page using the icon at the top middle of the screen.</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/device-status-icon.jpg></div></div><p>In this step, we are concerned only with the data under the Sync Status (General)</p><p>This is what that section looks like when there is still data left to sync:</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/items-remaining.jpg></div></div><p>This is what that section looks like when the syncing is complete:</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/no-items-remaining.jpg></div></div><div class="notification alert">The initial sync on the device can take a very long time (up to 30 minutes with a good internet connection) and it can pause during the process if it encounters problems. This sync only needs to be performed once for a device, but it is important that it is done fully before the device can be used.</div><p>There are a few things to note about the initial sync process:</p><ul><li>A &ldquo;sleeping&rdquo; device will not sync - during this step the device needs to be attended and kept in awake mode (or the settings should be changed so that it never goes to sleep)</li><li>The sync can hang at certain intervals. Most of the time the device will recover on it&rsquo;s own after a few minutes of idleness - in fact, we haven&rsquo;t had a case yet, where it doesn&rsquo;t recover. We&rsquo;ve seen cases where it sits idle for up to 10 minutes.</li></ul><p>There are two things you can do to manually recover the sync process:
- refresh the app screen (pull down the page for a refresh)
- completely exit the app (be sure that it is closed) and open it up again</p><ul><li>You should only attempt to log in (in the next step) to a device that is fully synced.</li></ul><h2 id=logging-on-to-the-device>Logging on to the Device</h2><p>A couple of notes about login and logout.</p><ul><li>Login is no longer depend on being connected to the Internet. You can login and logout while offline.</li><li>You no longer enter a username and password. Instead, each nurse is given a 4 digit pin.</li></ul><h3 id=pin-codes>Pin Codes</h3><p>There is now a &ldquo;Nurse&rdquo; content type on the backend. All the &ldquo;users&rdquo; in the former setup have been converted to &ldquo;Nurse&rdquo; and given a random PIN code. So, you can look it up in the backend at the base domain. For now, that would be by clicking on the &ldquo;Content&rdquo; menu, filtering for &ldquo;Nurse&rdquo;, and either clicking on an existing entry, or creating a new one.</p><p>All current nurses and each new nurse added to the system must be given their unique pin code in order to login to the tablet.</p><div class="notification alert">&lt;b>Note about PIN codes:&lt;/b> Nurse PINs and Device PINs are different things - Nurse PINs are used to identify the person who is using the device. It is used every time a nurse accesses the app. Device PINs are used to pair a device with the backend - it is only used once when a device is initially synced and must be reset when a device needs to be paired again.</div><h2 id=main-menu-screen>Main Menu Screen</h2><p>On the main menu screen after logging in, you have the following options:</p><ul><li>&ldquo;Logout&rdquo; would log you out.</li><li>&ldquo;Select your clinic&rdquo; would launch you into the familiar previous UI for selecting a clinic. However, we&rsquo;ll need to go to the &ldquo;Device Status&rdquo; page first (the first time).</li><li>&ldquo;Device status&rdquo; shows us the status of our contact with the backend. Which health centers are we working with? How recently did we contact the backend? How much data needs to be downloaded? How much data needs to be uploaded?</li></ul><h2 id=device-status-setting-up-a-device-to-work-with-health-centers>Device Status (Setting up a Device to work with Health Centers)</h2><p>We need to start with &ldquo;Device Status&rdquo; now, because we need to specify which health centers this device will work with. Here&rsquo;s what you&rsquo;ll see at the moment.</p><p>From this page you should select the Health Centers that you want synced to this device - you can choose as many as you want, but there is a risk that you will run out of space if you load too many.</p><h2 id=working-with-a-session>Working with a session</h2><p>We can now go back to the main page, and then choose the &ldquo;Select your Group&rdquo; option.</p><p>Note that groups are enabled or disabled depending on the user you are logged in as. At the moment, you edit these permissions by editing the &ldquo;Nurse&rdquo; entry on the backend. (And then reloading the browser to sync the changes to the client, or just waiting for the next automatic sync).</p><p>A couple of notes about this.</p><ul><li>In the past, we only showed a session here if there was one active right now. What this screen does instead is show recent and upcoming sessions &ndash; any session that is active now, ended less than a week ago, or will start in less than a week.</li><li>In the past, we could only interact with one session at a time. That is no longer the case &ndash; technically, we can interact with any &ldquo;open&rdquo; session now.</li></ul><p>For open sessions, you can now click on the &ldquo;Attendance&rdquo; button, and you&rsquo;ll get to the familiar &ldquo;attendance&rdquo; screen.</p><p>Click on the check-boxes to mark mothers as present (just like you used to), and then click on the icons at the top to start entering measurements etc., just like you used to. The big difference is that the things you enter are being periodically synced to the backend. In the past, we only saved things to the backend at the end, when you &ldquo;uploaded&rdquo; the session. There is now no separate &ldquo;upload&rdquo; step &ndash; things are being continuously uploaded periodically as you work.</p><p>There is also no &ldquo;download&rdquo; step. You used to have to specifically download a session in order to work with it offline. Now, downloading happens periodically.</p><p>Now, before you set out to a remote area that has no Internet connectivity, you still might want to check the &ldquo;Device Status&rdquo; page to make sure that your device is up-to-date, of course. And, once you return, you might want to glance at the &ldquo;Device Status&rdquo; page to see whether your work has been uploaded. But, it happens automatically.</p><p>To end a session, there is still an &ldquo;End Session&rdquo; button:</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/end-session.png></div></div><p>Which, when you click it, shows this:</p><div class="image-container half"><div class=image><img src=https://tip-global-health.github.io/eheza-documentation/uploads/end-session-confirmation.png></div></div><p>If you click on &ldquo;Continue&rdquo; (to close the session), then you get taken back to the clinic page, which now shows the session as being closed:</p><p>And, of course, that data is automatically uploaded to the backend.</p><div class=last-modified><p>Last Modified: 20 November 2021</p></div></section></div></div><footer class=footer><div class="footer container"><p>Copyright © 2021</p><p>The text of this documentation site is available under the <a href=https://creativecommons.org/licenses/by/4.0/>Creative Commons 4.0 International Attribution License (CC BY 4.0)</a>.</p><p>E-Heza open source software is licensed under the <a href=https://www.apache.org/licenses/LICENSE-2.0>Apache License, Version 2.0</a>.</p><p>"E-Heza" and the E-Heza logo a trademark of TIP Global Health.</p></div></footer><script type=text/javascript src=https://tip-global-health.github.io/eheza-documentation/app.min.bcb81fb60d2dc5498de98fd7c918076f77e69b09f36de764e067087a52051493.js integrity="sha256-vLgftg0txUmN6Y/XyRgHb3fmmwnzbedk4GcIelIFFJM=" media=screen></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js></script></body></html>